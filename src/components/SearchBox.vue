<template>
    <div class="search form">
      <h3 id="search-label">Search</h3>

      <div class="row no-gutter">
        <!-- Search Term Input -->
        <div class="col-12 col-md-10 form-item">
          <input
            type="text"
            class="form-control"
            v-model="search_term"
            placeholder="What do you need? eg. food, fuel"
            aria-labelledby="search-label"
            v-on:keyup.enter="onClickSearch"
          />
        </div>
      </div>

      <div class="row no-gutter">
        <!-- Location Selection -->
        <div class="col-12 col-sm-4 form-item">
          <label class="visually-hidden" for="location-select">Location</label>
          <multiselect
            id="location-select"
            v-model="search_location"
            :options="search_locations"
            placeholder="Location"
          />
        </div>

        <!-- Category -->
        <div class="col-12 col-sm-4 form-item">
          <label class="visually-hidden" for="category-select">Category</label>
          <multiselect
            id="category-select"
            v-model="search_category"
            :options="search_categories"
            placeholder="Category"
          />
        </div>

        <!-- Submit Button -->
        <div class="col-12 col-sm-3 form-submit">
          <button type="button" class="btn btn-info" v-on:click="onClickSearch">Search</button>
        </div>
      </div>
    </div>
</template>

<script>
import Multiselect from "vue-multiselect";

export default {
  components: { Multiselect },
  props: {
    search_locations: { },
    search_categories: { }
  },
  data() {
    return {
      search_term: "",
      search_location: null,
      search_category: null
    };
  },
  methods: {
    onClickSearch() {
      this.$emit("updated", {
        search_location: this.search_location,
        search_category: this.search_category,
        search_term: this.search_term
      });
    }
  }
};
</script>

<style scoped>
.row.no-gutter {
  margin: 0;
}
.form-control {
  height: 43px !important;
}
.btn-info {
  width: 100%;
  height: 43px;
}
.search.form {
  background-color: #384b71;
  padding: 10px 15px;
}
.search.form h3 {
  color: #fff;
  margin: 0 0 15px 0;
}
.search.form .form-item,
.search.form .form-submit {
  margin-bottom: 15px;
  padding: 0;
}
.search.form .form-item + .form-item,
.search.form .form-item + .form-submit {
  margin-left: 15px;
}
.search.form .multiselect__input:focus {
    border-bottom: 2px solid #02909e;
    padding:0;    
}
.search.form .multiselect__option--highlight:after {
  background: #02909e !important;
}
.search.form .multiselect__option--highlight {
  background: #02909e !important;
}
.search.form .multiselect__option--highlight::after {
    background:none!important;
    content: "";
}
.search.form .multiselect__option--selected.multiselect__option--highlight::after {
    content: "\f00d";
    font-family: "Font Awesome 5 Pro";
}
.search.form .multiselect__option--selected::after {
    content: "\f00c";
    font-family: "Font Awesome 5 Pro";
}
@media screen and (max-width: 575px) {
  .search.form .form-item + .form-item,
  .search.form .form-item + .form-submit {
    margin-left: 0;
  }
}
/*
  A style for visually hiding elements but keeping them
  available for screen readers and other assistive technologies
*/
.visually-hidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}
</style>
